{"ast":null,"code":"var _jsxFileName = \"/Users/mirbekmuratov/Desktop/react_chapter_9_updated/src/components/products/Details/Details.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { productsContext } from '../../../contexts/productContext';\nimport Loader from '../../Loader/Loader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Details = () => {\n  _s();\n\n  const {\n    getOneProduct,\n    oneProduct,\n    createComment,\n    deleteComment\n  } = useContext(productsContext);\n  const {\n    id\n  } = useParams();\n  const [showReviewBlock, setShowReviewBlock] = useState(false);\n  const [review, setReview] = useState(''); // console.log(oneProduct.reviews);\n\n  useEffect(() => {\n    getOneProduct(id);\n  }, []);\n\n  function saveComment() {\n    let newComment = new FormData();\n    newComment.append('text', review);\n    newComment.append('product', id);\n    createComment(id, newComment);\n  }\n\n  ;\n  return oneProduct ? /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: oneProduct.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: oneProduct.description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: oneProduct.price\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: oneProduct.category.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this), oneProduct.image ? /*#__PURE__*/_jsxDEV(\"img\", {\n      src: oneProduct.image,\n      width: \"250\",\n      height: \"250\",\n      alt: \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"h6\", {\n      children: \"No images here\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n      children: \"Reviews:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), oneProduct.reviews.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: item.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 11\n      }, this), item.is_author ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => deleteComment(id, item.id),\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 13\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }, this)]\n    }, item.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setShowReviewBlock(!showReviewBlock),\n      children: \"Add Review\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), showReviewBlock ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        children: \"Create Review\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter your comment\",\n        onChange: e => setReview(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          saveComment();\n          setShowReviewBlock();\n        },\n        children: \"Create\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : null]\n  }, void 0, true) : /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Details, \"hvQRKdIddbrq6yFtrKqjMPk50nU=\", false, function () {\n  return [useParams];\n});\n\n_c = Details;\nexport default Details;\n\nvar _c;\n\n$RefreshReg$(_c, \"Details\");","map":{"version":3,"names":["React","useContext","useEffect","useState","useParams","productsContext","Loader","Details","getOneProduct","oneProduct","createComment","deleteComment","id","showReviewBlock","setShowReviewBlock","review","setReview","saveComment","newComment","FormData","append","title","description","price","category","image","reviews","map","item","text","is_author","e","target","value"],"sources":["/Users/mirbekmuratov/Desktop/react_chapter_9_updated/src/components/products/Details/Details.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { productsContext } from '../../../contexts/productContext';\nimport Loader from '../../Loader/Loader';\n\nconst Details = () => {\n  const { getOneProduct, oneProduct, createComment, deleteComment } = useContext(productsContext);\n  const { id } = useParams();\n  const [showReviewBlock, setShowReviewBlock] = useState(false);\n  const [review, setReview] = useState('');\n\n  // console.log(oneProduct.reviews);\n\n  useEffect(() => {\n    getOneProduct(id);\n  }, []);\n\n  function saveComment(){\n    let newComment = new FormData();\n    newComment.append('text', review);\n    newComment.append('product', id);\n    createComment(id, newComment);\n  };\n\n  return oneProduct ? (\n    <>\n      <h2>{oneProduct.title}</h2>\n      <h2>{oneProduct.description}</h2>\n      <h2>{oneProduct.price}</h2>\n      <h2>{oneProduct.category.title}</h2>\n      {oneProduct.image ? (\n        <img src={oneProduct.image} width=\"250\" height=\"250\" alt=\"\" />\n      ) : (\n        <h6>No images here</h6>\n      )}\n      <br />\n\n      <h5>Reviews:</h5>\n      {oneProduct.reviews.map(item => (\n        <div key={item.id}>\n          <span>{item.text}</span>\n          {item.is_author ? (\n            <button onClick={() => deleteComment(id, item.id)}>Delete</button>\n          ) : (\n            null\n          )}\n          <br/>\n        </div>\n      ))}\n      <br/>\n      \n      <button onClick={() => setShowReviewBlock(!showReviewBlock)}>Add Review</button>\n      {showReviewBlock ? (\n        <>\n          <h5>Create Review</h5>\n          <input type=\"text\" placeholder=\"Enter your comment\" onChange={e => setReview(e.target.value)} />\n          <button onClick={() => {\n            saveComment();\n            setShowReviewBlock();\n          }}>Create</button>\n        </>\n      ) : (\n        null\n      )}\n    </>\n  ) : (\n    <Loader />\n  );\n}\n\nexport default Details"],"mappings":"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"},"metadata":{},"sourceType":"module"}